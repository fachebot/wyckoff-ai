# 威科夫分析工具配置文件示例
# 
# 使用方法：
# 1. 复制此文件为 wyckoff.toml 放在项目根目录
# 2. 或复制到 ~/.wyckoff/config.toml
# 3. 或通过 WYCKOFF_CONFIG_FILE 环境变量指定路径
#
# 配置优先级：CLI 参数 > 环境变量 > 配置文件 > 默认值
# 环境变量格式：WYCKOFF_<SECTION>__<KEY>，例如 WYCKOFF_ANALYSIS__DEFAULT_SYMBOL

# ============== 交易所配置 ==============
[exchange]
name = "binance"              # 交易所名称: binance, okx, bybit
rate_limit = true             # 启用速率限制
default_type = "spot"         # 市场类型: spot, future
timeout = 30000               # 请求超时(ms)

# ============== 分析配置 ==============
[analysis]
default_symbol = "BTC/USDT"   # 默认交易对
default_timeframe = "1h"      # 默认时间周期: 1m, 5m, 15m, 30m, 1h, 4h, 1d, 1w
default_limit = 720           # 默认K线数量 (50-5000)
# lookback_bars = 500         # 回看K线数（默认等于 limit）
strict_mode = false           # 严格模式：低置信度不标注事件
min_confidence = 0.6          # 最小置信度阈值 (0.0-1.0)

# 市场状态识别
regime_method = "kmeans"      # 方法: kmeans, cusum, none
regime_k = 4                  # KMeans 聚类数 (2-10)

# ============== 回测配置 ==============
[backtest]
initial_capital = 100000.0    # 初始资金
position_size_pct = 10.0      # 每笔仓位百分比 (1-100)
stop_loss_atr = 2.0           # 止损 ATR 倍数 (0.5-10)
take_profit_atr = 3.0         # 止盈 ATR 倍数 (0.5-20)
max_bars_in_trade = 48        # 最大持仓K线数 (1-500)
commission_pct = 0.075        # 手续费百分比
slippage_pct = 0.01           # 滑点百分比

# 允许交易的事件类型（留空表示全部）
# allowed_events = ["SOS", "SPRING", "LPS", "SC", "BC"]

# ============== 输出配置 ==============
[output]
output_dir = "out"            # 输出目录
export_csv = false            # 导出 CSV 数据文件
report_format = "markdown"    # 报告格式: markdown, html, json
locale = "zh_CN"              # 语言区域

# ============== 日志配置 ==============
[logging]
level = "INFO"                # 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
# file = "logs/wyckoff.log"   # 日志文件路径（可选）
show_path = false             # 显示源文件路径
rich_traceback = true         # 使用 Rich 异常追踪

# ============== LLM 配置 ==============
[llm]
provider = "none"             # LLM 提供商: openai, azure, anthropic, none
model = "gpt-4o-mini"         # 模型名称
temperature = 0.7             # 温度参数 (0-2)
max_tokens = 2000             # 最大 token 数 (100-8000)
# api_key = ""                # API 密钥（建议使用环境变量 WYCKOFF_LLM__API_KEY）

